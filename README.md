
スイッチサイエンス社製 ESP-WROOM-02開発ボード(https://www.switch-science.com/catalog/2500/)を
RICOH THETA S のリモコンにするためのファームウェアソースコードです。
（が、本ソースコードをESP8266を利用した他のチップに適用することは容易と思われます）

今回は、はんだ付けなし でも動作するよう作成しました。0番ピンと繋がったボタンがレリーズボタンになります。
電源はモバイルブースターが簡単です。 3.3v~5v 200mA の電源を接続することも可能です。
詳細は上記URLの回路図から理解してください。

ハンダ付けができる方は こちらのLED（https://www.switch-science.com/catalog/2397/）も追加すると
より便利なリモコンとなります。結線方法はソースコードのファイルヘッダを参照ください。
増設したLED1,LED2の意味合いは以下となります。
　LED1 ＝ wifi接続状態　（OFF:接続確立、ON:THETA S との接続動作）
　LED2 ＝ THETA S BUSY 状態　（OFF:idle状態、ON:静止画保存待ち or 動画撮影中 ）
　LED1とLED2を同時点灯 ＝ 後述のTHETA S登録モード中

このファームウェアの特徴としては、
　・電源Onからの起動、起動してからのwifi接続確立(平均3~5秒程度)、ボタン操作に対するTHETA Sの反応、
　　wifi接続断認識、いずれも速いです。
　　（静止画撮影の応答の速さを重視しています。動画はTHETA S本体の反応自体が遅いのでそれほど頑張ってません）
　・「初回起動」 or 「THETA Sとの接続動作中に上記ボタンを5秒程長押し」すると、
　　THETA S を検索＆して内部のflashメモリに記憶するというモードになります。
　　THETA S の SSID, パスワードは出荷状態としてください。
　　登録モードの時は、離れたTHETA S を検索対象としないようにしたので、できるだけTHETA S を近づけてください。
　　THETA S の探索が終わると自動で、THETA Sとの接続動作に切り替わります。
　・THETA S が登録された状態では、電源ONすると自動で「THETA S との接続動作」となります。
　・THETAが接続されると、本体の動作モード（静止画・動画）に連動して、静止画撮影 or 動画撮影開始／停止
　　が行えるようになります。　本体操作で動画撮影開始してリモコンで停止や、その逆も可能です。
　・動画撮影中に wifi 接続を切り、再びwifi接続した後などでも正常動作が可能です。
　・インターバル撮影の開始は行えませんが、スマートフォンでインターバル撮影を開始してTHETA S とスマートフォンの
　　wifi接続を切ったあと、THETA S と本リモコンをwifi接続した場合、本リモコンでインターバル撮影の停止が行えます。

開発環境は、arduino IDE です。JSONの解釈にフリーのライブラリを使用しています。
以下２手順で開発環境をセットアップしてください。それほど難しくありません。
　(1) ESP8266用にadruino IED を 10分でIDEのセットアップ
　　　http://qiita.com/azusa9/items/264165005aefaa3e8d7d
　(2) JSON パーサーのライブラリを追加する。
　　　ライブラリは以下からzipをダウンロード
　　　https://github.com/bblanchon/ArduinoJson
　　　ライブラリの追加方法は以下
　　　http://make.bcde.jp/category/39/

あとは、
　・パソコンにESP-WROOM-02開発ボードを繋ぐ（ドライバがインストールされCOMポートが認識されるまで待つ）
　・arduino IDE で本ファイル(ESP_ThetaRemote.ino)を開いて（ダブルクリック）
　　「スケッチ」→「マイコンボードに書き込む」をクリックしてしばしまつ。
で、出来上がります。

その他の細々したことは、ご自身でなんとかしてください。

